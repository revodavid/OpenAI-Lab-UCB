"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[209],{4137:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},h="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=p(n),u=r,d=h["".concat(l,".").concat(u)]||h[u]||m[u]||a;return n?o.createElement(d,i(i({ref:t},c),{},{components:n})):o.createElement(d,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3580:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var o=n(7462),r=(n(7294),n(4137));const a={},i="Understanding tokens",s={unversionedId:"Tokens",id:"Tokens",title:"Understanding tokens",description:"We've mentioned \"tokens\" a few times without stopping to explain what they are. Let's do that now.",source:"@site/docs/30-Tokens.md",sourceDirName:".",slug:"/Tokens",permalink:"/OpenAI-Lab-Docs/Tokens",draft:!1,editUrl:"https://github.com/gloveboxes/OpenAI-Lab-Docs/tree/main/docs/30-Tokens.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Understanding Completions",permalink:"/OpenAI-Lab-Docs/Completions"},next:{title:"Using Generative AI",permalink:"/OpenAI-Lab-Docs/Applications"}},l={},p=[{value:"Observe the token generation process",id:"observe-the-token-generation-process",level:2},{value:"Token limits",id:"token-limits",level:2}],c={toc:p},h="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(h,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"understanding-tokens"},"Understanding tokens"),(0,r.kt)("p",null,"We've mentioned \"tokens\" a few times without stopping to explain what they are. Let's do that now."),(0,r.kt)("p",null,"The OpenAI natural language models don't operate on words or characters as units of text, but on something in-between: tokens. A token may be a single character, or a fraction of a word, or an entire word. Many common words are represented by a single token, less common words are represented by multiple tokens."),(0,r.kt)("p",null,"When you enter text in the prompt box or generate a completion, a counter appears below that counts the total number of tokens in the box. (Note: the counter takes a few seconds to update if you're actively typing.)"),(0,r.kt)("p",null,"How many tokens are in the following words?"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    "apple"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    "hamburger"\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'    "Skaarsgard"\n')),(0,r.kt)("p",null,'As a common word, "apple" requires only one token. The word "hamburger" requires three tokens: "ham", "bur" and "ger". Unless they are very common, proper names generally require multiple tokens. It\'s this token representation that allows AI models to generate words that are not in any dictionary, but without having to generate text on a letter-by-letter basis (which could easily result in gibberish).'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Tip"),": OpenAI provides a useful tool for visualizing the tokens in text phrases. Try it out here: ",(0,r.kt)("a",{parentName:"p",href:"https://platform.openai.com/tokenizer"},"OpenAI Tokenizer"),"."),(0,r.kt)("p",null,"The natural language models generate completions one token at a time, but the generated token is not deterministic. At each step, the model outputs a list of ",(0,r.kt)("em",{parentName:"p"},"all")," possible tokens with associated weights. The API samples one token from this list, with heavily-weighted tokens more likely to be selected than the others. "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://bea.stollnitz.com/images/how-gpt-works/1-ntokens.png",alt:"Diagram: N tokens in, one token out"})),(0,r.kt)("p",null,'Then it adds that token to the prompt and repeats the process until the "Max length (tokens)" limit is met for the completion, or until the model generates a special token called a "stop token", which prevents further tokens from being generated. (This ',(0,r.kt)("a",{parentName:"p",href:"https://bea.stollnitz.com/blog/how-gpt-works/"},"blog post")," by Beatriz Stollnitz explains the process in more detail.)"),(0,r.kt)("p",null,"This is how the model generates completions of one or more words, and why those completions can change from invocation to invocation."),(0,r.kt)("h2",{id:"observe-the-token-generation-process"},"Observe the token generation process"),(0,r.kt)("p",null,'To observe the completion generation process token-by-token, set the "Max length (tokens)" option to 1. Now enter a this prompt (feel free to replace the last letter with another of your choice):'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Here is a long and unique name for a cat: J\n")),(0,r.kt)("p",null,"Now, repeatedly click the Generate button. With each click, a new token is added to your prompt, which becomes the new prompt each time you click Generate."),(0,r.kt)("p",null,'Eventually, you will observe this pop-up: "No text was generated by the model. Consider modifying your prompt and parameters to improve response behavior". This occurs when the model\'s highest-weighted token is the "stop" token, which prevents any further generation. (This message will also appear if the generated token is whitespace. In that case, you can click Generate again until a non-whitespace token is generated.)'),(0,r.kt)("h2",{id:"token-limits"},"Token limits"),(0,r.kt)("p",null,"Every model has a limit on the number of tokens it can process in a single request. For ",(0,r.kt)("inlineCode",{parentName:"p"},"text-davinci-003")," it is 4,096 tokens, and you can see the limits for other models ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/cognitive-services/openai/concepts/models#gpt-3-models-1"},"here"),". Note that this limit applies to the total number of tokens in the prompt ",(0,r.kt)("em",{parentName:"p"},"and")," the completion: as we've seen, the completion is added to the prompt before the next token is generated, and both must be contained within the token limit."),(0,r.kt)("p",null,"Newer models like ",(0,r.kt)("inlineCode",{parentName:"p"},"GPT-4")," have much larger token limits: up to 32,768 tokens. This not only allows for longer completions but also much larger prompts. This is particularly useful for prompt engineering, as we'll see later."))}m.isMDXComponent=!0}}]);